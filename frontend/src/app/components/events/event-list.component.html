<div class="event-list-container">
  <h2>Available Events</h2>
  
  <mat-card class="filter-card">
    <form [formGroup]="filterForm" (ngSubmit)="applyFilters()">
      <div class="filter-row">
        <mat-form-field appearance="outline">
          <mat-label>Category</mat-label>
          <mat-select formControlName="category">
            <mat-option value="">All Categories</mat-option>
            <mat-option value="Music">Music</mat-option>
            <mat-option value="Workshop">Workshop</mat-option>
            <mat-option value="Conference">Conference</mat-option>
            <mat-option value="Sports">Sports</mat-option>
            <mat-option value="Other">Other</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Date</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="date">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Venue</mat-label>
          <input matInput formControlName="venue" placeholder="Search by venue">
        </mat-form-field>

        <button mat-raised-button color="primary" type="submit">Filter</button>
        <button mat-button type="button" (click)="clearFilters()">Clear</button>
      </div>
    </form>
  </mat-card>

  <div class="events-grid" *ngIf="events.length > 0; else noEvents">
    <mat-card *ngFor="let event of events" class="event-card">
      <mat-card-header>
        <mat-card-title>{{ event.name }}</mat-card-title>
        <mat-card-subtitle>{{ event.category }}</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <p><strong>Venue:</strong> {{ event.venue }}</p>
        <p><strong>Date:</strong> {{ formatDate(event.date_time) }}</p>
        <p><strong>Available Tickets:</strong> {{ event.available_tickets }}</p>
        <p><strong>Price:</strong> ${{ event.ticket_price || 0 }}</p>
        <p *ngIf="event.description">{{ event.description }}</p>
      </mat-card-content>
      
      <mat-card-actions>
        <button mat-raised-button color="primary" 
                (click)="viewEvent(event.id!)"
                [disabled]="!event.available_tickets">
          {{ event.available_tickets ? 'View Details' : 'Sold Out' }}
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <ng-template #noEvents>
    <div class="no-events">
      <p>No events found matching your criteria.</p>
    </div>
  </ng-template>
</div>